{% extends 'panel/base_page/base_admin.html' %}

{% block title %}National ID Admin Panel{% endblock %}

{% block content %}
<h1 class="mt-4">Welcome to the National ID Admin Panel!</h1>
<p>Here you can manage users, appointments, documents, and settings.</p>

<!-- Cards Container -->
<div class="card-container">
    <div class="card text-center animated fadeIn">
        <div class="card-body">
            <h5 class="card-title"><i class="fas fa-user"></i> User</h5>
            <p class="card-text">Manage user information and roles.</p>
            <p class="card-text">Count: {{ user_count }}</p>
            <a href="{% url 'user_information' %}" class="btn btn-primary">View</a>
        </div>
    </div>
    <div class="card text-center animated fadeIn">
        <div class="card-body">
            <h5 class="card-title"><i class="fas fa-calendar-alt"></i> Appointment</h5>
            <p class="card-text">Manage user appointments.</p>
            <p class="card-text">Count: {{ appointment_count }}</p>
            <a href="{% url 'view_detail_admin' model_name='appointment' %}" class="btn btn-primary">View</a>
        </div>
    </div>
    <div class="card text-center animated fadeIn">
        <div class="card-body">
            <h5 class="card-title"><i class="fas fa-file-alt"></i> Documents</h5>
            <p class="card-text">Manage user documents.</p>
            <p class="card-text">Count: {{ document_count }}</p>
            <a href="{% url 'view_detail_admin' model_name='document' %}" class="btn btn-primary">View</a>
        </div>
    </div>
    <div class="card text-center animated fadeIn">
        <div class="card-body">
            <h5 class="card-title"><i class="fas fa-id-card"></i> Missing ID Card</h5>
            <p class="card-text">Manage reports of missing ID cards.</p>
            <p class="card-text">Count: {{ missing_id_card_count }}</p>
            <a href="{% url 'view_detail_admin' model_name='missing_id_card' %}" class="btn btn-primary">View</a>
        </div>
    </div>
    <div class="card text-center animated fadeIn">
        <div class="card-body">
            <h5 class="card-title"><i class="fas fa-bell"></i> Notifications</h5>
            <p class="card-text">Manage notifications.</p>
            <p class="card-text">Count: {{ notification_count }}</p>
            <a href="{% url 'view_detail_admin' model_name='notification' %}" class="btn btn-primary">View</a>
        </div>
    </div>
    <div class="card text-center animated fadeIn">
        <div class="card-body">
            <h5 class="card-title"><i class="fas fa-comments"></i> Communication</h5>
            <p class="card-text">Manage communications.</p>
            <p class="card-text">Count: {{ communication_count }}</p>
            <a href="{% url 'view_detail_admin' model_name='communication' %}" class="btn btn-primary">View</a>
        </div>
    </div>
    <div class="card text-center animated fadeIn">
        <div class="card-body">
            <h5 class="card-title"><i class="fas fa-envelope"></i> Contact Us</h5>
            <p class="card-text">Manage contact messages.</p>
            <p class="card-text">Count: {{ contact_us_count }}</p>
            <a href="{% url 'view_detail_admin' model_name='contact_us' %}" class="btn btn-primary">View</a>
        </div>
    </div>
    <div class="card text-center animated fadeIn">
        <div class="card-body">
            <h5 class="card-title"><i class="fas fa-building"></i> Offices</h5>
            <p class="card-text">Manage office locations.</p>
            <p class="card-text">Count: {{ office_count }}</p>
            <a href="{% url 'view_detail_admin' model_name='office' %}" class="btn btn-primary">View</a>
        </div>
    </div>
    <div class="card text-center animated fadeIn">
        <div class="card-body">
            <h5 class="card-title"><i class="fas fa-lock"></i> Password Resets</h5>
            <p class="card-text">Manage password reset requests.</p>
            <p class="card-text">Count: {{ password_reset_count }}</p>
            <a href="{% url 'view_detail_admin' model_name='password_reset' %}" class="btn btn-primary">View</a>
        </div>
    </div>
</div>

<!-- Statistics Graph -->
<section class="statistics mt-5">
    <h2>Statistics Overview</h2>
    <canvas id="statisticsChart" width="400" height="200"></canvas>
</section>

<!-- Include Chart.js Library -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
    // Data for the chart
    const data = {
        labels: ['Users', 'Appointments', 'Documents', 'Missing ID Cards', 'Notifications', 'Communications', 'Contact Us', 'Offices', 'Password Resets'],
        datasets: [{
            label: 'Counts',
            data: [
                {{ user_count }},
                {{ appointment_count }},
                {{ document_count }},
                {{ missing_id_card_count }},
                {{ notification_count }},
                {{ communication_count }},
                {{ contact_us_count }},
                {{ office_count }},
                {{ password_reset_count }}
            ],
            backgroundColor: [
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)',
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
            ],
            borderColor: [
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)',
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            borderWidth: 1
        }]
    };

    // Configuration for the chart
    const config = {
        type: 'bar',
        data: data,
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'top',
                },
                title: {
                    display: true,
                    text: 'Admin Panel Statistics'
                }
            }
        },
    };

    // Render the chart
    const statisticsChart = new Chart(
        document.getElementById('statisticsChart'),
        config
    );
</script>

{% endblock %}
