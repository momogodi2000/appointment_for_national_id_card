{% extends 'panel/base_page/base_police.html' %}

{% load static %}

{% block content %}
<div class="dashboard-content">
    <h1 class="text-center mb-4">Welcome to the Police Panel!</h1>
    <p class="text-center">Here you can manage appointments, view user information, notifications, and settings.</p>

    <!-- Cards Container -->
    <div class="row card-container mb-4">
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card text-center h-100">
                <div class="card-body">
                    <h5 class="card-title"><i class="fas fa-user"></i> User</h5>
                    <p class="card-text">Manage user information and roles.</p>
                    <p class="card-text">Count: {{ user_count }}</p>
                    <a href="{% url 'user_information' %}" class="btn btn-primary">View</a>
                </div>
            </div>
        </div>
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card text-center h-100">
                <div class="card-body">
                    <h5 class="card-title"><i class="fas fa-chart-line"></i> Statistics</h5>
                    <p class="card-text">View system statistics and metrics.</p>
                    <p class="card-text">Count: {{ appointment_count }}</p>
                    <a href="#" class="btn btn-primary">View</a>
                </div>
            </div>
        </div>
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card text-center h-100">
                <div class="card-body">
                    <h5 class="card-title"><i class="fas fa-chart-pie"></i> Analyze</h5>
                    <p class="card-text">Analyze data and trends.</p>
                    <p class="card-text">Count: {{ document_count }}</p>
                    <a href="#" class="btn btn-primary">View</a>
                </div>
            </div>
        </div>
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card text-center h-100">
                <div class="card-body">
                    <h5 class="card-title"><i class="fas fa-money-bill-wave"></i> Payment</h5>
                    <p class="card-text">Manage payments and transactions.</p>
                    <p class="card-text">Count: {{ missing_id_card_count }}</p>
                    <a href="#" class="btn btn-primary">View</a>
                </div>
            </div>
        </div>
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card text-center h-100">
                <div class="card-body">
                    <h5 class="card-title"><i class="fas fa-id-card"></i> Missing ID Card</h5>
                    <p class="card-text">Manage reports of missing ID cards.</p>
                    <p class="card-text">Count: {{ notification_count }}</p>
                    <a href="#" class="btn btn-primary">View</a>
                </div>
            </div>
        </div>
        <div class="col-lg-4 col-md-6 mb-4">
            <div class="card text-center h-100">
                <div class="card-body">
                    <h5 class="card-title"><i class="fas fa-calendar-alt"></i> Appointment</h5>
                    <p class="card-text">Manage user appointments.</p>
                    <p class="card-text">Count: {{ communication_count }}</p>
                    <a href="#" class="btn btn-primary">View</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Statistics Graph -->
    <div class="chart-container mb-4">
        <canvas id="statisticsChart"></canvas>
    </div>

    <!-- Regional Information Table -->
    <div class="table-responsive mt-4">
        <h2 class="text-center mb-4">Regional Information</h2>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Region</th>
                    <th>Headquarters</th>
                    <th>Departments</th>
                </tr>
            </thead>
            <tbody>
                {% for office in regions %}
                <tr>
                    <td>{{ office.name }}</td>
                    <td>{{ office.headquarter }}</td>
                    <td>{{ office.population }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // Chart.js script for displaying data
    var ctx = document.getElementById('statisticsChart').getContext('2d');
    var myChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['Users', 'Appointments', 'Documents', 'Missing ID Cards', 'Notifications', 'Communications', 'Contact Us'],
            datasets: [{
                label: 'Counts',
                data: [
                    {{ user_count }},
                    {{ appointment_count }},
                    {{ document_count }},
                    {{ missing_id_card_count }},
                    {{ notification_count }},
                    {{ communication_count }},
                    {{ contact_us_count }}
                ],
                backgroundColor: 'rgba(54, 162, 235, 0.2)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });
</script>
{% endblock %}
