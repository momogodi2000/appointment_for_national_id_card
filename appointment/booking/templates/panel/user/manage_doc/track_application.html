{% extends 'panel/base_page/base.html' %}

{% block title %}Track Application{% endblock %}

{% block content %}
<div class="container">
    <h2>Track Application</h2>
    <form action="{% url 'track_application' %}" id="track-application-form" method="post">
        {% csrf_token %}
        <div class="form-group">
            <label for="applicationId">Appointment ID</label>
            <input type="text" class="form-control" id="applicationId" name="applicationId" placeholder="Enter your appointment ID" required>
        </div>
        <button type="submit" class="btn btn-primary">Track</button>
    </form>
    <div id="applicationStatus" class="mt-4">
        <!-- Application status will be displayed here -->
    </div>
</div>
{% endblock %}

{% block custom_js %}
<script>
$(document).ready(function(){
    $('#track-application-form').on('submit', function(event){
        event.preventDefault();
        var applicationId = $('#applicationId').val();
        $.ajax({
            url: '{% url "track_application" %}',
            type: 'GET',
            data: { 'applicationId': applicationId },
            success: function(response) {
                $('#applicationStatus').html('<p class="text-success">Application status: ' + response.status + '</p>');
            },
            error: function() {
                $('#applicationStatus').html('<p class="text-danger">Error retrieving application status. Please try again.</p>');
            }
        });
    });
});
</script>
{% endblock %}
